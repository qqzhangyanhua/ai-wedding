# 交互设计优化计划

## 项目概述
AI婚纱照平台 - 交互设计优化与用户体验提升

**总时长：** 约21个工作日
**优先级：** P0 > P1 > P2

---

## 阶段 1：照片上传体验优化 ⚡ P0
**预计耗时：3-4天**

### 1.1 添加拖拽排序功能
- [ ] 集成 @dnd-kit/core 或 react-beautiful-dnd
- [ ] 用户可拖动照片调整顺序
- [ ] 产出：PhotoUploader.tsx 组件

### 1.2 实现照片质量检测
- [ ] 使用Canvas API检测模糊度（Laplacian算子）
- [ ] 检测亮度/对比度（色彩直方图）
- [ ] 可选：人脸检测（face-api.js）
- [ ] 产出：lib/image-quality-checker.ts

### 1.3 添加批量删除和质量标记UI
- [ ] 照片角标显示质量状态（✓优秀 ⚠️警告 ✗不合格）
- [ ] 批量选择模式 + 批量删除按钮
- [ ] 质量不合格照片高亮提示
- [ ] 产出：更新 CreatePage.tsx

### 1.4 创建"最佳照片示例"弹窗
- [ ] Dialog组件展示优质照片案例
- [ ] 对比展示好坏照片差异
- [ ] 产出：components/PhotoGuideModal.tsx

---

## 阶段 2：生成流程透明化 ⚡ P0
**预计耗时：4-5天**

### 2.1 重构生成进度为真实阶段状态
- [ ] 后端返回状态：uploading → analyzing → generating → completed
- [ ] 前端根据状态显示不同文案和图标
- [ ] 产出：更新 api/generate-image/route.ts 和 CreatePage.tsx

### 2.2 添加后台生成支持
- [ ] 轮询机制：前端定时查询 generations 表状态
- [ ] 可选：Supabase Realtime订阅（推荐）
- [ ] 用户可离开页面，顶部通知栏显示进度
- [ ] 产出：hooks/useGenerationPolling.ts + 顶部通知组件

### 2.3 等待页面添加趣味小贴士
- [ ] 创建小贴士数组（婚纱拍摄技巧、AI知识等）
- [ ] 每5秒轮播一条
- [ ] 产出：components/GeneratingTips.tsx

### 2.4 实现失败重试机制
- [ ] 失败时保留已上传照片和项目信息
- [ ] 显示"重新生成"按钮
- [ ] 产出：更新 CreatePage.tsx 和 DashboardPage.tsx

---

## 阶段 3：结果展示增强 🎯 P1
**预计耗时：3-4天**

### 3.1 添加原图对比功能
- [ ] 图片查看器增加对比模式
- [ ] 滑动条控制显示比例（原图 ↔ AI图）
- [ ] 产出：components/ImageCompareSlider.tsx

### 3.2 实现智能套餐推荐逻辑
- [ ] 根据选择数量推荐最优惠套餐
- [ ] 高亮显示节省金额
- [ ] 产出：lib/pricing-recommender.ts

### 3.3 增强预览水印显示
- [ ] 当前水印改为边角半透明标签
- [ ] 增加对角线"PREVIEW"文字水印
- [ ] 产出：更新 ResultsPage.tsx 样式

### 3.4 添加AI图片评分标签
- [ ] 后端集成简单评分算法（美学评分API或规则）
- [ ] 前端显示"⭐最佳构图"/"❤️最自然"等标签
- [ ] 产出：api/rate-images/route.ts + UI更新

---

## 阶段 4：仪表盘优化 🎯 P1
**预计耗时：2-3天**

### 4.1 添加项目搜索和高级筛选
- [ ] 搜索框（按项目名、模板名）
- [ ] 筛选器：日期范围、状态、模板类别
- [ ] 产出：components/ProjectFilters.tsx

### 4.2 项目卡片添加快速操作菜单
- [ ] Dropdown菜单：编辑名称、删除、重新生成、分享
- [ ] 产出：使用 components/ui/dropdown-menu.tsx

### 4.3 处理中项目显示实时进度条
- [ ] 连接阶段2的轮询机制
- [ ] 卡片上显示mini进度条和状态文字
- [ ] 产出：更新 DashboardPage.tsx

### 4.4 统计数据改为可交互图表
- [ ] 使用 recharts 展示趋势
- [ ] 点击跳转到详情（如点击下载数→查看被下载最多的照片）
- [ ] 产出：components/StatsChart.tsx

---

## 阶段 5：首页与引导优化 📱 P2
**预计耗时：2-3天**

### 5.1 添加首次访问引导蒙层
- [ ] 使用 intro.js 或自定义Spotlight组件
- [ ] localStorage记录已完成引导
- [ ] 产出：components/OnboardingTour.tsx

### 5.2 关键位置添加积分系统Tooltip
- [ ] 使用 components/ui/tooltip.tsx
- [ ] 在积分消耗点、余额显示处添加说明
- [ ] 产出：更新相关页面

### 5.3 模板页添加推荐和热门分区
- [ ] 后端添加 is_featured、popularity_score 字段
- [ ] 前端新增"为您推荐"和"热门TOP10"Tab
- [ ] 产出：更新 TemplatesPage.tsx 和数据库

### 5.4 首页三步流程改为交互式演示
- [ ] Hover显示动画和详细说明
- [ ] 点击卡片展开详情
- [ ] 产出：更新 HomePage.tsx

---

## 阶段 6：细节打磨 ✨ P2
**预计耗时：1-2天**

### 6.1 Toast消息优化
- [ ] 成功：3秒，错误：5秒，警告：4秒
- [ ] 添加关闭按钮
- [ ] 产出：更新 components/Toast.tsx

### 6.2 优化骨架屏一致性
- [ ] 确保CardSkeleton尺寸与真实Card完全匹配
- [ ] 产出：更新 components/ui/card-skeleton.tsx

### 6.3 所有空状态添加插图
- [ ] 使用 lucide-react 图标 + 自定义SVG
- [ ] 统一空状态组件
- [ ] 产出：components/EmptyState.tsx

### 6.4 关键操作增加确认弹窗
- [ ] 删除项目、清空照片等操作
- [ ] 使用 components/ui/alert-dialog.tsx
- [ ] 产出：更新相关页面

### 6.5 完善无障碍支持
- [ ] 所有图标按钮添加 aria-label
- [ ] 确保键盘Tab导航顺序正确
- [ ] 添加焦点可见样式（focus-visible:ring-2）
- [ ] 产出：全局审查和修复

---

## 📊 时间线总览

| 阶段 | 耗时 | 累计 | 优先级 |
|------|------|------|--------|
| 阶段1：照片上传优化 | 3-4天 | 4天 | P0 |
| 阶段2：生成流程透明化 | 4-5天 | 9天 | P0 |
| 阶段3：结果展示增强 | 3-4天 | 13天 | P1 |
| 阶段4：仪表盘优化 | 2-3天 | 16天 | P1 |
| 阶段5：首页引导优化 | 2-3天 | 19天 | P2 |
| 阶段6：细节打磨 | 1-2天 | 21天 | P2 |

**总计：约21个工作日（3周）**

---

## 🎯 实施原则

1. **每完成一个阶段进行测试和评审**
2. **阶段1和2最关键，优先完成**
3. **阶段3-6可根据实际情况调整顺序**
4. **每个阶段完成后运行 `pnpm typecheck` 和 `pnpm lint`**
5. **建议每完成一个阶段提交一次代码**

---

## 📝 进度追踪

- [ ] 阶段1：照片上传体验优化
- [ ] 阶段2：生成流程透明化
- [ ] 阶段3：结果展示增强
- [ ] 阶段4：仪表盘优化
- [ ] 阶段5：首页与引导优化
- [ ] 阶段6：细节打磨

---

**创建日期：** 2025-01-XX
**最后更新：** 2025-01-XX
